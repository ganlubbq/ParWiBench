cscope 15 $HOME/Projects/comm/modules/LTE/turbo               0000031482
	@defines.h

1 #i‚de‡
__DEFINES_H_


2 
	#__DEFINES_H_


	)

5 
	#N_C_BITS
 10000

	)

6 
	#N_D_BITS
 ((
N_C_BITS
 + 4Ë* 3)

	)

	@pccc.cpp

2 
	~<c°dlib
>

3 
	~<cm©h
>

4 
	~<˘ime
>

5 
	~"turbo.h
"

6 
	~"ty≥s.h
"

7 
	~"deföes.h
"

9 
	~<io°ªam
>

10 
	~<f°ªam
>

12 
	$maö
(
¨gc
, *
¨gv
[])

14 
uöt32_T
 
k
 = 0; k < 1; k++)

18 
uöt32_T
 
n_c_bôs
 = 4;

19 
uöt8_T
 
c_bôs
[
N_C_BITS
];

22 
uöt8_T
 
d_bôs
[
N_D_BITS
];

23 
uöt32_T
 
n_d_bôs
;

26 
y
[
N_D_BITS
];

29 
öt8_T
 
d
[
N_C_BITS
];

30 
uöt32_T
 
n_d
;

33 
	`§™d
(()
	`time
(
NULL
));

34 
uöt32_T
 
i
 = 0; i < 
n_c_bôs
; i++)

36 
c_bôs
[
i
] = (
uöt8_T
)
	`Êo‹
((()
	`ønd
(Ë/ 
RAND_MAX
 + 0.5));

39 
°d
::
cout
 << ()
c_bôs
[
i
];

41 
°d
::
cout
 << std::
ídl
;

44 
°d
::
of°ªam
 
tb_tx_out
;

46 
tb_tx_out
.
	`›í
("tx.dat");

47 i‡(!
tb_tx_out
)

49 
°d
::
˚º
 << "error: unableÅo open input file: "

50 << 
tb_tx_out
 << 
°d
::
ídl
;

54 
uöt32_T
 
i
 = 0; i < 
n_c_bôs
; i++)

56 
tb_tx_out
 << ()(
c_bôs
[
i
]);

58 
tb_tx_out
.
	`˛o£
();

62 
uöt32_T
 
n_gís
 = 2;

63 
uöt32_T
 
gís
[2] = {013, 015};

64 
uöt32_T
 
c⁄°øöt_Àngth
 = 4;

65 
uöt32_T
 
n_ôîs
 = 1;

66 
Turbo
 
	`tb
(
gís
, 
n_gís
, 
c⁄°øöt_Àngth
, 
n_c_bôs
, 
n_ôîs
);

69 
tb
.
	`ícodî
(
c_bôs
, 
n_c_bôs
, 
d_bôs
, 
n_d_bôs
);

72 
°d
::
cout
 << 
n_d_bôs
 << std::
ídl
;

78 
uöt32_T
 
i
 = 0; i < 
n_d_bôs
; i++)

80 
°d
::
cout
 << ()
d_bôs
[
i
];

81 
y
[
i
] = ()(1 - 2 * 
d_bôs
[i]);

84 
°d
::
cout
 << std::
ídl
;

90 
tb
.
	`decodî
(
y
, 
n_d_bôs
, 
d
, 
n_d
);

93 
uöt32_T
 
n_îr
 = 0;

94 
uöt32_T
 
i
 = 0; i < 
n_d
; i++)

96 
d
[
i
] = (1 - d[i]) / 2;

97 
n_îr
 +(
d
[
i
] !
c_bôs
[i]);

99 
°d
::
cout
 << "öãæóvî_size=" << 
n_c_bôs
 << std::
ídl
;

100 
°d
::
cout
 << 
n_îr
 << std::
ídl
;

103 
°d
::
of°ªam
 
tb_rx_out
;

105 
tb_rx_out
.
	`›í
("rx.dat");

106 i‡(!
tb_rx_out
)

108 
°d
::
˚º
 << "error: unableÅo open input file: "

109 << 
tb_rx_out
 << 
°d
::
ídl
;

113 
uöt32_T
 
i
 = 0; i < 
n_d
; i++)

115 
tb_rx_out
 << ()(
d
[
i
]);

117 
tb_rx_out
.
	`˛o£
();

121 
	}
}

	@pccc_wrapper.cpp

2 
	~<c°dlib
>

3 
	~<cm©h
>

4 
	~<˘ime
>

5 
	~"turbo.h
"

6 
	~"ty≥s.h
"

7 
	~"deföes.h
"

8 
	~"pccc_wøµî.h
"

10 
	~<io°ªam
>

11 
	~<f°ªam
>

15 
	$wøµî_turbo_ícodî
(c⁄° 
uöt8_T
 *
c_bôs
, c⁄° 
uöt32_T
 
n_c_bôs
,

16 
uöt8_T
 *
d_bôs
, 
uöt32_T
 &
n_d_bôs
)

18 
uöt32_T
 
n_gís
 = 2;

19 
uöt32_T
 
gís
[2] = {013, 015};

20 
uöt32_T
 
c⁄°øöt_Àngth
 = 4;

21 
Turbo
 
	`tb
(
gís
, 
n_gís
, 
c⁄°øöt_Àngth
, 
n_c_bôs
);

23 
tb
.
	`•ec_ícodî
(
c_bôs
, 
n_c_bôs
, 
d_bôs
, 
n_d_bôs
);

24 
	}
}

27 
	$wøµî_£nd
(
uöt8_T
 *
d_bôs
, 
uöt32_T
 
n_d_bôs
)

30 
°d
::
of°ªam
 
f_tx
;

32 
f_tx
.
	`›í
("tx_channel_coding.dat");

33 i‡(!
f_tx
)

35 
°d
::
˚º
 << "error: unableÅo open output file: "

36 << 
f_tx
 << 
°d
::
ídl
;

37 
	`exô
(1);

40 
uöt32_T
 
i
 = 0; i < 
n_d_bôs
; i++)

42 
f_tx
 << ()
d_bôs
[
i
];

45 
f_tx
.
	`˛o£
();

46 
	}
}

51 
	$wøµî_ch™√l
(c⁄° 
uöt8_T
 *
d_bôs
, c⁄° 
uöt32_T
 
n_d_bôs
,

52 *
y
)

55 
	}
}

58 
	$wøµî_ªcv
(*
d_rx
, 
uöt32_T
 &
n_rx
)

61 
°d
::
if°ªam
 
f_rx
;

62 
°d
::
°rög
 
°r
;

64 
f_rx
.
	`›í
("tx_channel_coding.dat");

65 i‡(!
f_rx
)

67 
°d
::
˚º
 << "error: unableÅo open input file: "

68 << 
f_rx
 << 
°d
::
ídl
;

69 
	`exô
(1);

72 
f_rx
 >> 
°r
;

73 
n_rx
 = 
°r
.
	`Àngth
();

74 
i
 = 0; i < 
n_rx
; i++)

75 
d_rx
[
i
] = ()(
°r
[i] - '0');

76 
f_rx
.
	`˛o£
();

77 
	}
}

82 
	$wøµî_turbo_decodî
(c⁄° *
y
, c⁄° 
uöt32_T
 
n_d_bôs
,

83 
öt8_T
 *
d
, 
uöt32_T
 &
n_d
, uöt32_T 
n_ôîs
, uöt32_T 
öãæóvî_size
)

85 
uöt32_T
 
n_gís
 = 2;

86 
uöt32_T
 
gís
[2] = {013, 015};

87 
uöt32_T
 
c⁄°øöt_Àngth
 = 4;

89 
Turbo
 
	`tb
(
gís
, 
n_gís
, 
c⁄°øöt_Àngth
, 
öãæóvî_size
, 
n_ôîs
);

91 
tb
.
	`•ec_decodî
(
y
, 
n_d_bôs
, 
d
, 
n_d
);

94 
uöt32_T
 
i
 = 0; i < 
n_d
; i++)

96 
d
[
i
] = (1 - d[i]) / 2;

98 
	}
}

	@pccc_wrapper.h

1 #i‚de‡
__PCCC_WRAPPER_H_


2 
	#__PCCC_WRAPPER_H_


	)

5 
wøµî_turbo_ícodî
(c⁄° 
uöt8_T
 *
c_bôs
, c⁄° 
uöt32_T
 
n_c_bôs
,

6 
uöt8_T
 *
d_bôs
, 
uöt32_T
 &
n_d_bôs
);

7 
wøµî_£nd
(
uöt8_T
 *
d_bôs
, 
uöt32_T
 
n_d_bôs
);

9 
wøµî_ch™√l
(c⁄° 
uöt8_T
 *
d_bôs
, c⁄° 
uöt32_T
 
n_d_bôs
,

10 *
y
);

11 
wøµî_turbo_decodî
(c⁄° *
y
, c⁄° 
uöt32_T
 
n_d_bôs
,

12 
öt8_T
 *
d
, 
uöt32_T
 &
n_d
, uöt32_T 
n_ôî
, uöt32_T 
öãæóvî_size
);

13 
wøµî_ªcv
(*
d_rx
, 
uöt32_T
 &
n_rx
);

	@turbo.cpp

1 
	~"turbo.h
"

3 
	~<c°rög
>

4 
	~<cm©h
>

5 
	~<c°dlib
>

6 
	~<io°ªam
>

10 
uöt32_T
 
	gTURBO_INT_K_TABLE
[
TURBO_INT_K_TABLE_SIZE
] = { 4, 48, 56, 64, 72, 80, 88, 96, 104, 112,

30 
uöt32_T
 
	gTURBO_INT_F1_TABLE
[
TURBO_INT_K_TABLE_SIZE
] = { 3, 7, 19, 7, 7, 11, 5, 11, 7, 41,103, 15, 9,

46 
uöt32_T
 
	gTURBO_INT_F2_TABLE
[
TURBO_INT_K_TABLE_SIZE
] = { 10, 12, 42, 16, 18, 20, 22, 24, 26, 84, 90, 32, 34,

62 
	gTurbo
::
	$Turbo
(
uöt32_T
 
gís
[], uöt32_T 
n_gís
, uöt32_T 
c⁄°øöt_Àngth
, uöt32_T 
öãæóvî_size
, uöt32_T 
n_ôîs
)

64 
m_n_gís
 = 
n_gís
;

65 
m_c°_Àn
 = 
c⁄°øöt_Àngth
;

66 
m_öãæóvî_size
 = 
öãæóvî_size
;

67 
m_n_ôîs
 = 
n_ôîs
;

68 
m_n_°©es
 = (1 << (
m_c°_Àn
 - 1));

69 
m_n_èû
 = 
m_c°_Àn
 - 1;

71 
m_n_uncoded
 = 
öãæóvî_size
;

72 
m_n_coded
 = (1 + (
n_gís
 - 1Ë* 2Ë* 
m_n_uncoded
 + 2 * (1 + 
m_n_gís
 - 1Ë* 
m_n_èû
;

75 
m_gí_pﬁs
 = 
√w
 
uöt32_T
[
m_n_gís
];

76 
m_ªv_gí_pﬁs
 = 
√w
 
uöt32_T
[
m_n_gís
];

85 
m_°©e_å™s
 = 
√w
 
uöt8_T
[
m_n_°©es
 * 2];

86 
m_ªv_°©e_å™s
 = 
√w
 
uöt8_T
[
m_n_°©es
 * 2];

87 
m_ouçut_∑rôy
 = 
√w
 
uöt8_T
[
m_n_°©es
 * (
m_n_gís
 - 1) * 2];

88 
m_ªv_ouçut_∑rôy
 = 
√w
 
uöt8_T
[
m_n_°©es
 * (
m_n_gís
 - 1) * 2];

90 
	`£t_gíî©‹_pﬁynomüls
(
gís
, 
n_gís
, 
c⁄°øöt_Àngth
);

92 
m_åñlis
 = 
√w
 
öt8_T
[
m_n_°©es
 * m_n_°©e†* (1 + 
m_n_gís
)];

94 
Lc
 = 1.0;

96 
	}
}

98 
	gãm∂©e
 <
ty≥«me
 
	gT
>

99 
	gTurbo
::
	$öã∫Æ_öãæóvî
(c⁄° 
T
 *
ö
, T *
out
) const

101 
uöt32_T
 
i
;

102 
uöt32_T
 
f1
 = 0;

103 
uöt32_T
 
f2
 = 0;

104 
uöt32_T
 
idx
;

107 
i
 = 0; i < 
TURBO_INT_K_TABLE_SIZE
; i++)

109 if(
m_öãæóvî_size
 =
TURBO_INT_K_TABLE
[
i
])

111 
f1
 = 
TURBO_INT_F1_TABLE
[
i
];

112 
f2
 = 
TURBO_INT_F2_TABLE
[
i
];

117 
i
 = 0; i < 
m_öãæóvî_size
; i++)

119 
idx
 = (
f1
 * 
i
 + 
f2
 * i * iË% 
m_öãæóvî_size
;

120 
out
[
i
] = 
ö
[
idx
];

122 
	}
}

124 
	gãm∂©e
 <
ty≥«me
 
	gT
>

125 
	gTurbo
::
	$öã∫Æ_deöãæóvî
(c⁄° 
T
 *
ö
, T *
out
) const

127 
uöt32_T
 
i
;

128 
uöt32_T
 
f1
 = 0;

129 
uöt32_T
 
f2
 = 0;

130 
uöt32_T
 
idx
;

133 
i
 = 0; i < 
TURBO_INT_K_TABLE_SIZE
; i++)

135 i‡(
m_öãæóvî_size
 =
TURBO_INT_K_TABLE
[
i
])

137 
f1
 = 
TURBO_INT_F1_TABLE
[
i
];

138 
f2
 = 
TURBO_INT_F2_TABLE
[
i
];

143 
i
 = 0; i < 
m_öãæóvî_size
; i++)

145 
idx
 = (
f1
 * 
i
 + 
f2
 * i * iË% 
m_öãæóvî_size
;

146 
out
[
idx
] = 
ö
[
i
];

148 
	}
}

150 
	gTurbo
::
	$•ec_c⁄°ôuít_ícodî
(c⁄° 
uöt8_T
 *
ö_bôs
, uöt8_T *
out_bôs
, uöt8_T *
fb_bôs
) const

152 
uöt32_T
 
i
;

153 
uöt32_T
 
j
;

154 
uöt8_T
 
s_ªg
[4] = {0, 0, 0, 0};

155 
uöt8_T
 
g_¨øy
[4] = {1, 1, 0, 1};

156 
uöt8_T
 
fb_¨øy
[4] = {0, 0, 1, 1};

159 
i
 = 0; i < 
m_n_uncoded
; i++)

162 
fb_bôs
[
i
] = 0;

163 
j
 = 0; j < 
m_c°_Àn
; j++)

165 
fb_bôs
[
i
] +
s_ªg
[
j
] * 
fb_¨øy
[j];

167 
fb_bôs
[
i
] %= 2;

170 
s_ªg
[0] = (
fb_bôs
[
i
] + 
ö_bôs
[i]) % 2;

173 
out_bôs
[
i
] = 0;

174 
j
 = 0; j < 
m_c°_Àn
; j++)

176 
out_bôs
[
i
] +
s_ªg
[
j
] * 
g_¨øy
[j];

178 
out_bôs
[
i
] %= 2;

181 
j
 = 
m_c°_Àn
 - 1; j > 0; j--)

183 
s_ªg
[
j
] = s_reg[j - 1];

188 
i
 = 
m_n_uncoded
; i < m_n_uncoded + 
m_n_èû
; i++)

191 
fb_bôs
[
i
] = 0;

192 
j
 = 0; j < 
m_c°_Àn
; j++)

194 
fb_bôs
[
i
] +
s_ªg
[
j
] * 
fb_¨øy
[j];

196 
fb_bôs
[
i
] %= 2;

199 
s_ªg
[0] = (
fb_bôs
[
i
] + fb_bits[i]) % 2;

202 
out_bôs
[
i
] = 0;

203 
j
 = 0; j < 
m_c°_Àn
; j++)

205 
out_bôs
[
i
] +
s_ªg
[
j
] * 
g_¨øy
[j];

207 
out_bôs
[
i
] %= 2;

210 
j
 = 
m_c°_Àn
 - 1; j > 0; j--)

212 
s_ªg
[
j
] = s_reg[j - 1];

215 
	}
}

217 
	gTurbo
::
	$•ec_ícodî
(c⁄° 
uöt8_T
 *
öput
, c⁄° 
uöt32_T
 
n_öput
,

218 
uöt8_T
 *
ouçut
, 
uöt32_T
 &
n_ouçut
) const

220 
uöt32_T
 
cou¡
;

221 
uöt32_T
 
n_bønch_bôs
 = 
m_n_uncoded
 + 
m_n_èû
;

222 
uöt8_T
 *
ã_c
 = 
√w
 uöt8_T[
m_n_uncoded
];

223 
uöt8_T
 *
ã_z
 = 
√w
 uöt8_T[
n_bønch_bôs
];

224 
uöt8_T
 *
ã_fb1
 = 
√w
 uöt8_T[
n_bønch_bôs
];

225 
uöt8_T
 *
ã_c_¥ime
 = 
√w
 uöt8_T[
n_bønch_bôs
];

226 
uöt8_T
 *
ã_z_¥ime
 = 
√w
 uöt8_T[
n_bønch_bôs
];

227 
uöt8_T
 *
ã_x_¥ime
 = 
√w
 uöt8_T[
n_bønch_bôs
];

229 
n_ouçut
 = 
m_n_coded
;

231 
cou¡
 = 0;

234 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

236 
ã_c
[
j
] = 
öput
[j];

239 
	`•ec_c⁄°ôuít_ícodî
(
öput
, 
ã_z
, 
ã_fb1
);

242 
	`öã∫Æ_öãæóvî
(
öput
, 
ã_c_¥ime
);

245 
	`•ec_c⁄°ôuít_ícodî
(
ã_c_¥ime
, 
ã_z_¥ime
, 
ã_x_¥ime
);

248 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

250 
ouçut
[
cou¡
++] = 
ã_c
[
j
];

251 
ouçut
[
cou¡
++] = 
ã_z
[
j
];

252 
ouçut
[
cou¡
++] = 
ã_z_¥ime
[
j
];

256 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

258 
ouçut
[
cou¡
++] = 
ã_fb1
[
m_n_uncoded
 + 
j
];

259 
ouçut
[
cou¡
++] = 
ã_z
[
m_n_uncoded
 + 
j
];

261 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

263 
ouçut
[
cou¡
++] = 
ã_x_¥ime
[
m_n_uncoded
 + 
j
];

264 
ouçut
[
cou¡
++] = 
ã_z_¥ime
[
m_n_uncoded
 + 
j
];

267 
dñëe
[] 
ã_c
;

268 
dñëe
[] 
ã_z
;

269 
dñëe
[] 
ã_fb1
;

270 
dñëe
[] 
ã_c_¥ime
;

271 
dñëe
[] 
ã_z_¥ime
;

272 
dñëe
[] 
ã_x_¥ime
;

273 
	}
}

275 
	gTurbo
::
	$ªvî£_öt
(
uöt32_T
 
Àngth
, 
ö
)

277 
out
 = 0;

278 
uöt32_T
 
i
, 
j
;

280 
i
 = 0; i < (
Àngth
 >> 1); i++)

282 
out
 = ouà| ((
ö
 & (1 << 
i
)Ë<< (
Àngth
 - 1 - (i << 1)));

284 
j
 = 0; j < (
Àngth
 - 
i
); j++)

286 
out
 = ouà| ((
ö
 & (1 << (
j
 + 
i
))Ë>> ((j << 1Ë- (
Àngth
 & 1) + 1));

289  
out
;

290 
	}
}

292 
	gTurbo
::
	$ˇlc_°©e_å™sôi⁄
(c⁄° 
uöt32_T
 
ö°©e
, c⁄° 
öput
, 
uöt8_T
 *
∑rôy
)

294 
ö
 = 0;

295 
ãmp
 = (
m_ªv_gí_pﬁs
[0] & (
ö°©e
 << 1)), 
∑rôy_ãmp
, 
∑rôy_bô
;

297 
uöt32_T
 
i
 = 0; i < 
m_c°_Àn
; i++)

299 
ö
 = (
ãmp
 & 1) ^ in;

300 
ãmp
 =Åemp >> 1;

302 
ö
 = i¿^ 
öput
;

305 
uöt32_T
 
j
 = 0; j < (
m_n_gís
 - 1); j++)

307 
∑rôy_ãmp
 = ((
ö°©e
 << 1Ë+ 
ö
Ë& 
m_ªv_gí_pﬁs
[
j
 + 1];

308 
∑rôy_bô
 = 0;

309 
uöt32_T
 
i
 = 0; i < 
m_c°_Àn
; i++)

311 
∑rôy_bô
 = (
∑rôy_ãmp
 & 1) ^Öarity_bit;

312 
∑rôy_ãmp
 =Öarity_temp >> 1;

314 
∑rôy
[
j
] = 
∑rôy_bô
;

317  
ö
 + ((
ö°©e
 << 1Ë& ((1 << (
m_c°_Àn
 - 1)) - 1));

318 
	}
}

320 
	gTurbo
::
	$£t_gíî©‹_pﬁynomüls
(
uöt32_T
 
gís
[], uöt32_T 
n_gís
, uöt32_T 
c⁄°øöt_Àngth
)

325 
uöt32_T
 
K
 = 
c⁄°øöt_Àngth
;

326 
uöt32_T
 
m
 = 
K
 - 1;

327 
uöt32_T
 
n_°©es
 = (1 << 
m
);

329 
s0
, 
s1
, 
s_¥im
;

331 
uöt8_T
 *
p0
 = 
√w
 uöt8_T[
n_gís
 - 1];

332 
uöt8_T
 *
p1
 = 
√w
 uöt8_T[
n_gís
 - 1];

336 
uöt32_T
 
i
 = 0; i < 
n_gís
; i++)

338 
m_gí_pﬁs
[
i
] = 
gís
[i];

339 
m_ªv_gí_pﬁs
[
i
] = 
	`ªvî£_öt
(
K
, 
gís
[i]);

347 
s_¥im
 = 0; s_¥im < 
m_n_°©es
; s_prim++)

349 
s0
 = 
	`ˇlc_°©e_å™sôi⁄
(
s_¥im
, 0, 
p0
);

350 
m_°©e_å™s
[
s_¥im
 * 2 + 0] = 
s0
;

351 
m_ªv_°©e_å™s
[
s0
 * 2 + 0] = 
s_¥im
;

352 
uöt32_T
 
j
 = 0; j < (
n_gís
 - 1); j++)

354 
m_ouçut_∑rôy
[
s_¥im
 * (
n_gís
 - 1Ë* 2 + 2 * 
j
 + 0] = 
p0
[j];

355 
m_ªv_ouçut_∑rôy
[
s0
 * (
n_gís
 - 1Ë* 2 + 2 * 
j
 + 0] = 
p0
[j];

358 
s1
 = 
	`ˇlc_°©e_å™sôi⁄
(
s_¥im
, 1, 
p1
);

359 
m_°©e_å™s
[
s_¥im
 * 2 + 1] = 
s1
;

360 
m_ªv_°©e_å™s
[
s1
 * 2 + 1] = 
s_¥im
;

361 
uöt32_T
 
j
 = 0; j < (
n_gís
 - 1); j++)

363 
m_ouçut_∑rôy
[
s_¥im
 * (
n_gís
 - 1Ë* 2 + 2 * 
j
 + 1] = 
p1
[j];

364 
m_ªv_ouçut_∑rôy
[
s1
 * (
n_gís
 - 1Ë* 2 + 2 * 
j
 + 1] = 
p1
[j];

368 
dñëe
[] 
p0
;

369 
dñëe
[] 
p1
;

370 
	}
}

372 
	gTurbo
::
	$c⁄°ôuít_ícodî
(c⁄° 
uöt8_T
 *
öput
, uöt8_T *
èû
, uöt8_T *
∑rôy
) const

374 
uöt32_T
 
ícodî_°©e
 = 0, 
èrgë_°©e
;

376 
uöt32_T
 
i
 = 0; i < 
m_n_uncoded
; i++)

378 
uöt32_T
 
j
 = 0; j < (
m_n_gís
 - 1); j++)

380 
∑rôy
[
i
 * (
m_n_gís
 - 1Ë+ 
j
] = 
m_ouçut_∑rôy
[
ícodî_°©e
 * (m_n_gí†- 1Ë* 2 + j * 2 + ()
öput
[i]];

382 
ícodî_°©e
 = 
m_°©e_å™s
[ícodî_°©ê* 2 + ()
öput
[
i
]];

385 
uöt32_T
 
i
 = 0; i < 
m_c°_Àn
 - 1; i++)

387 
èrgë_°©e
 = (
ícodî_°©e
 << 1Ë& ((1 << (
m_c°_Àn
 - 1)) - 1);

388 i‡(
m_°©e_å™s
[
ícodî_°©e
 * 2 + 0] =
èrgë_°©e
)

390 
èû
[
i
] = 0;

394 
èû
[
i
] = 1;

396 
uöt32_T
 
j
 = 0; j < (
m_n_gís
 - 1); j++)

398 
∑rôy
[(
i
 + 
m_n_uncoded
Ë* (
m_n_gís
 - 1Ë+ 
j
] = 
m_ouçut_∑rôy
[
ícodî_°©e
 * (m_n_gí†- 1Ë* 2 + j * 2 + ()
èû
[i]];

400 
ícodî_°©e
 = 
èrgë_°©e
;

402 
	}
}

404 
	gTurbo
::
	$ícodî
(c⁄° 
uöt8_T
 *
öput
, c⁄° 
uöt32_T
 
n_öput
,

405 
uöt8_T
 *
ouçut
, 
uöt32_T
 &
n_ouçut
) const

407 
uöt32_T
 
n_blocks
;

408 
uöt32_T
 
cou¡
;

409 
uöt8_T
 *
öput_bôs
 = 
√w
 uöt8_T[
m_n_uncoded
];

410 
uöt8_T
 *
öãæóved_öput_bôs
 = 
√w
 uöt8_T[
m_n_uncoded
];

411 
uöt8_T
 *
sy°1
 = 
√w
 uöt8_T[
m_n_uncoded
 + 
m_n_èû
];

412 
uöt8_T
 *
sy°2
 = 
√w
 uöt8_T[
m_n_uncoded
 + 
m_n_èû
];

413 
uöt8_T
 *
èû1
 = 
√w
 uöt8_T[
m_n_èû
];

414 
uöt8_T
 *
èû2
 = 
√w
 uöt8_T[
m_n_èû
];

415 
uöt8_T
 *
∑rôy1
 = 
√w
 uöt8_T[(
m_n_uncoded
 + 
m_n_èû
Ë* (
m_n_gís
 - 1)];

416 
uöt8_T
 *
∑rôy2
 = 
√w
 uöt8_T[(
m_n_uncoded
 + 
m_n_èû
Ë* (
m_n_gís
 - 1)];

418 
n_blocks
 = 
n_öput
 / 
m_n_uncoded
;

419 
n_ouçut
 = 
n_blocks
 * 
m_n_coded
;

421 
cou¡
 = 0;

424 
uöt32_T
 
i
 = 0; i < 
n_blocks
; i++)

427 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

429 
öput_bôs
[
j
] = 
öput
[
i
 * 
m_n_uncoded
 + j];

433 
	`c⁄°ôuít_ícodî
(
öput_bôs
, 
èû1
, 
∑rôy1
);

436 
	`öã∫Æ_öãæóvî
(
öput_bôs
, 
öãæóved_öput_bôs
);

439 
	`c⁄°ôuít_ícodî
(
öãæóved_öput_bôs
, 
èû2
, 
∑rôy2
);

443 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

445 
sy°1
[
j
] = 
öput_bôs
[j];

446 
sy°2
[
j
] = 
öãæóved_öput_bôs
[j];

451 
uöt32_T
 
j
 = 
m_n_uncoded
; j < m_n_uncoded + 
m_n_èû
; j++)

453 
sy°1
[
j
] = 
èû1
[j - 
m_n_uncoded
];

454 
sy°2
[
j
] = 
èû2
[j - 
m_n_uncoded
];

458 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

461 
ouçut
[
cou¡
++] = 
sy°1
[
j
];

463 
uöt32_T
 
k
 = 0; k < 
m_n_gís
 - 1; k++)

465 
ouçut
[
cou¡
++] = 
∑rôy1
[
j
 * (
m_n_gís
 - 1Ë+ 
k
];

468 
uöt32_T
 
k
 = 0; k < (
m_n_gís
 - 1); k++)

470 
ouçut
[
cou¡
++] = 
∑rôy2
[
j
 * (
m_n_gís
 - 1Ë+ 
k
];

475 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

478 
ouçut
[
cou¡
++] = 
sy°1
[
m_n_uncoded
 + 
j
];

480 
uöt32_T
 
k
 = 0; k < (
m_n_gís
 - 1); k++)

482 
ouçut
[
cou¡
++] = 
∑rôy1
[(
m_n_uncoded
 + 
j
Ë* (
m_n_gís
 - 1Ë+ 
k
];

487 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

490 
ouçut
[
cou¡
++] = 
sy°2
[
m_n_uncoded
 + 
j
];

492 
uöt32_T
 
k
 = 0; k < (
m_n_gís
 - 1); k++)

494 
ouçut
[
cou¡
++] = 
∑rôy2
[(
m_n_uncoded
 + 
j
Ë* (
m_n_gís
 - 1Ë+ 
k
];

499 
dñëe
[] 
öput_bôs
;

500 
dñëe
[] 
öãæóved_öput_bôs
;

501 
dñëe
[] 
sy°1
;

502 
dñëe
[] 
sy°2
;

503 
dñëe
[] 
èû1
;

504 
dñëe
[] 
èû2
;

505 
dñëe
[] 
∑rôy1
;

506 
dñëe
[] 
∑rôy2
;

507 
	}
}

509 
	gTurbo
::
	$gí_åñlis
()

511 
uöt32_T
 
n_°©es
 = 8;

512 
uöt8_T
 
s_ªg
[4] = {0, 0, 0, 0};

513 
uöt8_T
 
g_¨øy
[4] = {1, 1, 0, 1};

514 
uöt8_T
 
fb_¨øy
[4] = {0, 0, 1, 1};

517 
uöt32_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

519 
uöt32_T
 
s
 = 0; s < 
n_°©es
; s++)

521 
uöt32_T
 
i
 = 0; i < 3; i++)

523 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 
i
] = 0;

528 
uöt32_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

530 
uöt8_T
 
u
 = 0; u < 2; u++)

532 
uöt32_T
 
s
;

533 
uöt8_T
 
c1
 = 
u
;

534 
uöt8_T
 
c2
 = 0;

536 
s_ªg
[0] = 
u
;

537 
uöt32_T
 
i
 = 1; i < 4; i++)

539 
s_ªg
[
i
] = ((
s_¥ime
 >> (3 - i)) & 1);

541 
uöt32_T
 
i
 = 0; i < 4; i++)

543 
s_ªg
[0] +(s_ªg[
i
] * 
fb_¨øy
[i]);

545 
s_ªg
[0] %= 2;

546 
uöt32_T
 
i
 = 0; i < 4; i++)

548 
c2
 +(
s_ªg
[
i
] * 
g_¨øy
[i]);

550 
c2
 %= 2;

553 
s
 = 0;

554 
uöt32_T
 
i
 = 0; i < 3; i++)

556 
s
 |(
s_ªg
[2 - 
i
] << i);

561 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 0] = 1 - 2 * 
c1
;

562 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 1] = 1 - 2 * 
c2
;

563 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 2] = 1 - 2 * 
u
;

582 
	}
}

584 
	gTurbo
::
	$•ec_decodî
(c⁄° 
Êﬂt_poöt
 *
y
, c⁄° 
uöt32_T
 
n_y
, 
öt8_T
 *
d
, uöt32_T &
n_d
)

586 
uöt32_T
 
n_bønch_bôs
 = 
m_n_uncoded
 + 
m_n_èû
;

587 
uöt32_T
 
cou¡
;

589 
Êﬂt_poöt
 *
y_1s
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

590 
Êﬂt_poöt
 *
y_2s
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

591 
Êﬂt_poöt
 *
y_1p
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

592 
Êﬂt_poöt
 *
y_2p
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

594 
Êﬂt_poöt
 *
≠ri‹i
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

595 
Êﬂt_poöt
 *
exåösic
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

596 
Êﬂt_poöt
 *
exåösic_öt
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

597 
Êﬂt_poöt
 *
LLR
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

598 
Êﬂt_poöt
 *
LLR_öt
 = 
√w
 flﬂt_poöt[
n_bønch_bôs
 + 1];

600 
cou¡
 = 0;

601 
uöt32_T
 
i
 = 0; i < 
m_n_uncoded
; i++)

603 
y_1s
[
i
 + 1] = 
y
[
cou¡
++];

604 
y_1p
[
i
 + 1] = 
y
[
cou¡
++];

605 
y_2s
[
i
 + 1] = 0.0;

606 
y_2p
[
i
 + 1] = 
y
[
cou¡
++];

610 
uöt32_T
 
i
 = 
m_n_uncoded
; i < m_n_uncoded + 
m_n_èû
; i++)

612 
y_1s
[
i
 + 1] = 
y
[
cou¡
++];

613 
y_1p
[
i
 + 1] = 
y
[
cou¡
++];

615 
uöt32_T
 
i
 = 
m_n_uncoded
; i < m_n_uncoded + 
m_n_èû
; i++)

617 
y_2s
[
i
 + 1] = 
y
[
cou¡
++];

618 
y_2p
[
i
 + 1] = 
y
[
cou¡
++];

621 
	`gí_åñlis
();

623 
uöt32_T
 
i
 = 1; i <
n_bønch_bôs
; i++)

625 
≠ri‹i
[
i
] = 0.0;

628 
	`öã∫Æ_öãæóvî
(
y_1s
 + 1, 
y_2s
 + 1);

630 
uöt32_T
 
i
 = 0; i < 
m_n_ôîs
; i++)

633 
	`•ec_m≠_decodî
(
y_1s
, 
y_1p
, 
≠ri‹i
, 
exåösic
, 
LLR
, 
n_bønch_bôs
);

636 
	`mem˝y
(
exåösic_öt
 + 1, 
exåösic
 + 1, 
n_bønch_bôs
 * (
Êﬂt_poöt
));

648 
	`öã∫Æ_öãæóvî
(
exåösic
 + 1, 
≠ri‹i
 + 1);

650 
	`•ec_m≠_decodî
(
y_2s
, 
y_2p
, 
≠ri‹i
, 
exåösic
, 
LLR
, 
n_bønch_bôs
);

652 
	`öã∫Æ_deöãæóvî
(
exåösic
 + 1, 
≠ri‹i
 + 1);

654 
	`öã∫Æ_deöãæóvî
(
LLR
 + 1, 
LLR_öt
 + 1);

670 
uöt32_T
 
i
 = 1; i <
m_n_uncoded
; i++)

672 
d
[
i
 - 1] = (
y_2s
[i] + 
≠ri‹i
[i] + 
exåösic_öt
[i] >= 0) ? +1 : -1;

675 
n_d
 = 
m_n_uncoded
;

677 
dñëe
[] 
y_1s
;

678 
dñëe
[] 
y_2s
;

679 
dñëe
[] 
y_1p
;

680 
dñëe
[] 
y_2p
;

682 
dñëe
[] 
≠ri‹i
;

683 
dñëe
[] 
exåösic
;

684 
dñëe
[] 
exåösic_öt
;

685 
dñëe
[] 
LLR
;

686 
dñëe
[] 
LLR_öt
;

687 
	}
}

689 
	gTurbo
::
	$•ec_m≠_decodî
(c⁄° 
Êﬂt_poöt
 *
y_s
, c⁄° flﬂt_poöà*
y_p
, c⁄° flﬂt_poöà*
L_≠ri‹i
,

690 
Êﬂt_poöt
 *
L_exåösic
, flﬂt_poöà*
LLR
, c⁄° 
uöt32_T
 
n
) const

692 
uöt32_T
 
n_°©es
 = 8;

694 
Êﬂt_poöt
 *
gamma
 = 
√w
 flﬂt_poöt[(
n
 + 1Ë* 
n_°©es
 *Ç_states];

695 
Êﬂt_poöt
 *
gamma_e
 = 
√w
 flﬂt_poöt[(
n
 + 1Ë* 
n_°©es
 *Ç_states];

696 
Êﬂt_poöt
 *
Æpha
 = 
√w
 flﬂt_poöt[(
n
 + 1Ë* 
n_°©es
];

697 
Êﬂt_poöt
 *
bëa
 = 
√w
 flﬂt_poöt[(
n
 + 1Ë* 
n_°©es
];

709 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

711 i‡(
s
 == 0)

713 
Æpha
[0 * 
n_°©es
 + 
s
] = 1;

714 
bëa
[
n
 * 
n_°©es
 + 
s
] = 1;

718 
Æpha
[0 * 
n_°©es
 + 
s
] = 0;

719 
bëa
[
n
 * 
n_°©es
 + 
s
] = 0;

725 
uöt32_T
 
k
 = 1; k <
n
; k++)

727 
uöt8_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

729 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

731 
gamma_e
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
] = 0.0;

732 
gamma
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
] = 0.0;

738 
uöt32_T
 
k
 = 1; k <
n
; k++)

742 
uöt8_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

744 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

747 i‡(
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 2] != 0)

751 
gamma_e
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
] =

752 
	`exp
(0.5 * 
y_p
[
k
] * 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 1]);

754 
gamma
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
] =

755 
	`exp
(0.5 * 
L_≠ri‹i
[
k
] * 
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 0] + 0.5 * 
y_s
[k] * m_trellis[s_prime *Ç_states * 3 + s * 3 + 0]) *

756 
gamma_e
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
];

769 
Êﬂt_poöt
 
díomö©‹
 = 0.0;

771 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

773 
uöt8_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

775 
díomö©‹
 = díomö©‹ + 
Æpha
[(
k
 - 1Ë* 
n_°©es
 + 
s_¥ime
] *

776 
gamma
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
];

781 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

784 
Êﬂt_poöt
 
nomö©‹
 = 0.0;

786 
uöt8_T
 
i
 = 0; i < 
n_°©es
; i++)

788 
nomö©‹
 =Çomö©‹ + 
Æpha
[(
k
 - 1Ë* 
n_°©es
 + 
i
] *

789 
gamma
[
k
 * 
n_°©es
 *Ç_°©e†+ 
i
 *Ç_°©e†+ 
s
];

793 
Æpha
[
k
 * 
n_°©es
 + 
s
] = 
nomö©‹
 / 
díomö©‹
;

798 
uöt32_T
 
k
 = 
n
; k > 1; k--)

801 
Êﬂt_poöt
 
díomö©‹
 = 0.0;

803 
uöt32_T
 
s
 = 0; s < 
n_°©es
; s++)

805 
uöt32_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

807 
díomö©‹
 = díomö©‹ + 
Æpha
[(
k
 - 2Ë* 
n_°©es
 + 
s_¥ime
] *

808 
gamma
[(
k
 - 1Ë* 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
];

812 
uöt32_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

815 
Êﬂt_poöt
 
nomö©‹
 = 0.0;

817 
uöt32_T
 
i
 = 0; i < 
n_°©es
; i++)

819 
nomö©‹
 =Çomö©‹ + 
bëa
[
k
 * 
n_°©es
 + 
i
] *

820 
gamma
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
i
];

824 
bëa
[(
k
 - 1Ë* 
n_°©es
 + 
s_¥ime
] = 
nomö©‹
 / 
díomö©‹
;

830 
uöt32_T
 
k
 = 1; k <
n
; k++)

832 
Êﬂt_poöt
 
nomö©‹
 = 0.0;

833 
Êﬂt_poöt
 
díomö©‹
 = 0.0;

835 
uöt8_T
 
s_¥ime
 = 0; s_¥imê< 
n_°©es
; s_prime++)

837 
uöt8_T
 
s
 = 0; s < 
n_°©es
; s++)

839 i‡(
m_åñlis
[
s_¥ime
 * 
n_°©es
 * 3 + 
s
 * 3 + 2] > 0)

840 
nomö©‹
 =Çomö©‹ + 
Æpha
[(
k
 - 1Ë* 
n_°©es
 + 
s_¥ime
] *

841 
bëa
[
k
 * 
n_°©es
 + 
s
] *

842 
gamma_e
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
];

844 
díomö©‹
 = díomö©‹ + 
Æpha
[(
k
 - 1Ë* 
n_°©es
 + 
s_¥ime
] *

845 
bëa
[
k
 * 
n_°©es
 + 
s
] *

846 
gamma_e
[
k
 * 
n_°©es
 *Ç_°©e†+ 
s_¥ime
 *Ç_°©e†+ 
s
];

850 
L_exåösic
[
k
] = 
	`log
(
nomö©‹
 / 
díomö©‹
);

854 
LLR
[
k
] = 
L_≠ri‹i
[k] + 
y_s
[k] + 
L_exåösic
[k];

857 
dñëe
[] 
gamma
;

858 
dñëe
[] 
gamma_e
;

859 
dñëe
[] 
Æpha
;

860 
dñëe
[] 
bëa
;

861 
	}
}

863 
	gTurbo
::
	$m≠_decodî
(
Êﬂt_poöt
 *
ªcv_sy°
, flﬂt_poöà*
ªcv_∑rôy
, flﬂt_poöà*
≠ri‹i
, flﬂt_poöà*
exåösic
)

865 
Êﬂt_poöt
 
gamma_k_e
, 
nom
, 
dí
, 
ãmp0
, 
ãmp1
, 
exp_ãmp0
, 
exp_ãmp1
;

866 
j
, 
s0
, 
s1
, 
k
, 
kk
, 
s
, 
s_¥im
, 
s_¥im0
, 
s_¥im1
;

867 
block_Àngth
 = 
m_n_uncoded
;

871 
Êﬂt_poöt
 *
Æpha
 = 
√w
 flﬂt_poöt[
m_n_°©es
 * (
block_Àngth
 + 1)];

873 
Êﬂt_poöt
 *
bëa
 = 
√w
 flﬂt_poöt[
m_n_°©es
 * (
block_Àngth
 + 1)];

875 
Êﬂt_poöt
 *
gamma
 = 
√w
 flﬂt_poöt[
m_n_°©es
 * 2 * (
block_Àngth
 + 1)];

877 
Êﬂt_poöt
 *
díom
 = 
√w
 flﬂt_poöt[
block_Àngth
 + 1];

880 
k
 = 1; k <
block_Àngth
; k++)

883 
kk
 = 
k
 - 1;

884 
s_¥im
 = 0; s_¥im < 
m_n_°©es
; s_prim++)

886 
exp_ãmp0
 = 0.0;

887 
exp_ãmp1
 = 0.0;

889 
j
 = 0; j < (
m_n_gís
 - 1); j++)

891 
exp_ãmp0
 +0.5 * 
Lc
 * 
ªcv_∑rôy
[
kk
 * (
m_n_gís
 - 1Ë+ 
j
] * (
Êﬂt_poöt
)(1 - 2 * 
m_ouçut_∑rôy
[
s_¥im
 * (m_n_gens - 1) * 2 + j * 2 + 0]);

892 
exp_ãmp1
 +0.5 * 
Lc
 * 
ªcv_∑rôy
[
kk
 * (
m_n_gís
 - 1Ë+ 
j
] * (
Êﬂt_poöt
)(1 - 2 * 
m_ouçut_∑rôy
[
s_¥im
 * (m_n_gens - 1) * 2 + j * 2 + 1]);

917 
gamma
[(2 * 
s_¥im
 + 0Ë* (
block_Àngth
 + 1Ë+ 
k
] = 
	`exp
(0.5 * (
≠ri‹i
[
kk
] + 
Lc
 * 
ªcv_sy°
[kk]Ë+ 
exp_ãmp0
);

919 
gamma
[(2 * 
s_¥im
 + 1Ë* (
block_Àngth
 + 1Ë+ 
k
] = 
	`exp
(-0.5 * (
≠ri‹i
[
kk
] + 
Lc
 * 
ªcv_sy°
[kk]Ë+ 
exp_ãmp1
);

926 
uöt32_T
 
i
 = 0; i < 
m_n_°©es
; i++)

928 
Æpha
[
i
 * (
block_Àngth
 + 1) + 0] = 0.0;

930 
Æpha
[0 * (
block_Àngth
 + 1) + 0] = 1.0;

932 
	`mem£t
(
díom
, 0, (
Êﬂt_poöt
Ë* (
block_Àngth
 + 1));

936 
k
 = 1; k <
block_Àngth
; k++)

939 
s
 = 0; s < 
m_n_°©es
; s++)

942 
s_¥im0
 = 
m_ªv_°©e_å™s
[
s
 * 2 + 0];

943 
s_¥im1
 = 
m_ªv_°©e_å™s
[
s
 * 2 + 1];

945 
ãmp0
 = 
Æpha
[
s_¥im0
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] * 
gamma
[(2 * s_prim0 + 0) * (block_length + 1) + k];

946 
ãmp1
 = 
Æpha
[
s_¥im1
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] * 
gamma
[(2 * s_prim1 + 1) * (block_length + 1) + k];

947 
Æpha
[
s
 * (
block_Àngth
 + 1Ë+ 
k
] = 
ãmp0
 + 
ãmp1
;

949 
díom
[
k
] +
ãmp0
 + 
ãmp1
;

954 
s
 = 0; s < 
m_n_°©es
; s++)

956 
Æpha
[
s
 * (
block_Àngth
 + 1Ë+ 
k
] /
díom
[k];

963 
uöt32_T
 
i
 = 0; i < 
m_n_°©es
; i++)

965 
bëa
[
i
 * (
block_Àngth
 + 1) + block_length] = 0.0;

967 
bëa
[0 * (
block_Àngth
 + 1) + block_length] = 1.0;

971 
k
 = 
block_Àngth
; k >= 2; k--)

973 
s_¥im
 = 0; s_¥im < 
m_n_°©es
; s_prim++)

975 
s0
 = 
m_°©e_å™s
[
s_¥im
 * 2 + 0];

976 
s1
 = 
m_°©e_å™s
[
s_¥im
 * 2 + 1];

977 
ãmp0
 = 
bëa
[
s0
 * (
block_Àngth
 + 1Ë+ 
k
] * 
gamma
[(2 * 
s_¥im
 + 0) * (block_length + 1) + k];

978 
ãmp1
 = 
bëa
[
s1
 * (
block_Àngth
 + 1Ë+ 
k
] * 
gamma
[(2 * 
s_¥im
 + 1) * (block_length + 1) + k];

979 
bëa
[
s_¥im
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] = 
ãmp0
 + 
ãmp1
;

983 
s_¥im
 = 0; s_¥im < 
m_n_°©es
; s_prim++)

985 
bëa
[
s_¥im
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] /
díom
[k];

990 
k
 = 1; k <
block_Àngth
; k++)

993 
kk
 = 
k
 - 1;

994 
nom
 = 0.0;

995 
dí
 = 0.0;

996 
s_¥im
 = 0; s_¥im < 
m_n_°©es
; s_prim++)

998 
°d
::
cout
 << 
s_¥im
 << std::
ídl
;

999 
s0
 = 
m_°©e_å™s
[
s_¥im
 * 2 + 0];

1000 
s1
 = 
m_°©e_å™s
[
s_¥im
 * 2 + 1];

1001 
°d
::
cout
 << 
s0
 << "\t" << 
s1
 << std::
ídl
;

1002 
exp_ãmp0
 = 0.0;

1003 
exp_ãmp1
 = 0.0;

1004 
j
 = 0; j < (
m_n_gís
 - 1); j++)

1006 
exp_ãmp0
 +0.5 * 
Lc
 * 
ªcv_∑rôy
[
kk
 * (
m_n_gís
 - 1Ë+ 
j
] * ()(1 - 2 * 
m_ouçut_∑rôy
[
s_¥im
 * (m_n_gens - 1) * 2 + j * 2 + 0]);

1007 
exp_ãmp1
 +0.5 * 
Lc
 * 
ªcv_∑rôy
[
kk
 * (
m_n_gís
 - 1Ë+ 
j
] * ()(1 - 2 * 
m_ouçut_∑rôy
[
s_¥im
 * (m_n_gens - 1) * 2 + j * 2 + 1]);

1010 
gamma_k_e
 = 
	`exp
(
exp_ãmp0
);

1012 
nom
 +
Æpha
[
s_¥im
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] * 
gamma_k_e
 * 
bëa
[
s0
 * (block_length + 1) + k];

1015 
gamma_k_e
 = 
	`exp
(
exp_ãmp1
);

1017 
dí
 +
Æpha
[
s_¥im
 * (
block_Àngth
 + 1Ë+ 
k
 - 1] * 
gamma_k_e
 * 
bëa
[
s1
 * (block_length + 1) + k];

1021 
exåösic
[
kk
] = 
	`log
(
nom
 / 
dí
);

1023 
	}
}

1025 
	gTurbo
::
	$decode_block
(
Êﬂt_poöt
 *
ªcv_sy°1
, flﬂt_poöà*
ªcv_sy°2
,

1026 
Êﬂt_poöt
 *
ªcv_∑rôy1
, flﬂt_poöà*
ªcv_∑rôy2
, 
öt8_T
 *
decoded_bôs_i
)

1028 
uöt32_T
 
n_èûed
 = 
m_n_uncoded
 + 
m_n_èû
;

1032 
Êﬂt_poöt
 *
Le12
 = 
√w
 flﬂt_poöt[
n_èûed
];

1033 
Êﬂt_poöt
 *
Le12_öt
 = 
√w
 flﬂt_poöt[
n_èûed
];

1034 
Êﬂt_poöt
 *
Le21
 = 
√w
 flﬂt_poöt[
n_èûed
];

1035 
Êﬂt_poöt
 *
Le21_öt
 = 
√w
 flﬂt_poöt[
n_èûed
];

1036 
Êﬂt_poöt
 *
L
 = 
√w
 flﬂt_poöt[
n_èûed
];

1038 
	`mem£t
(
Le21
, 0, 
n_èûed
 * (
Êﬂt_poöt
));

1040 
	`öã∫Æ_öãæóvî
(
ªcv_sy°1
, 
ªcv_sy°2
);

1043 
uöt32_T
 
i
 = 0; i < 
m_n_ôîs
; i++)

1045 
	`m≠_decodî
(
ªcv_sy°1
, 
ªcv_∑rôy1
, 
Le21
, 
Le12
);

1046 
	`öã∫Æ_öãæóvî
(
Le12
, 
Le12_öt
);

1047 
	`mem£t
(
Le12_öt
 + 
m_öãæóvî_size
, 0, 
m_n_èû
);

1048 
	`m≠_decodî
(
ªcv_sy°2
, 
ªcv_∑rôy2
, 
Le12_öt
, 
Le21_öt
);

1049 
	`öã∫Æ_deöãæóvî
(
Le21_öt
, 
Le21
);

1050 
	`mem£t
(
Le21
 + 
m_öãæóvî_size
, 0, 
m_n_èû
);

1052 
uöt32_T
 
i
 = 0; i < 
m_n_uncoded
; i++)

1054 
L
[
i
] = 
ªcv_sy°1
[i] + 
Le21
[i] + 
Le12
[i];

1055 
decoded_bôs_i
[
i
] = (
L
[i] > 0.0) ? 1 : 0;

1060 
dñëe
[] 
Le12
;

1061 
dñëe
[] 
Le12_öt
;

1062 
dñëe
[] 
Le21
;

1063 
dñëe
[] 
Le21_öt
;

1064 
dñëe
[] 
L
;

1065 
	}
}

1067 
	gTurbo
::
	$decodî
(c⁄° 
Êﬂt_poöt
 *
ªcv_sig«ls
, c⁄° 
uöt32_T
 
n_ªcv_sig«ls
, 
öt8_T
 *
decoded_bôs
, uöt32_T &
n_decoded_bôs
)

1069 
uöt32_T
 
n_blocks
;

1070 
uöt32_T
 
cou¡
;

1072 
Êﬂt_poöt
 *
ªcv_sy°1
 = 
√w
 flﬂt_poöt[
m_n_uncoded
 + 
m_n_èû
];

1073 
Êﬂt_poöt
 *
ªcv_sy°2
 = 
√w
 flﬂt_poöt[
m_n_uncoded
 + 
m_n_èû
];

1074 
Êﬂt_poöt
 *
ªcv_∑rôy1
 = 
√w
 flﬂt_poöt[(
m_n_uncoded
 + 
m_n_èû
Ë* (
m_n_gís
 - 1)];

1075 
Êﬂt_poöt
 *
ªcv_∑rôy2
 = 
√w
 flﬂt_poöt[(
m_n_uncoded
 + 
m_n_èû
Ë* (
m_n_gís
 - 1)];

1077 
n_blocks
 = 
n_ªcv_sig«ls
 / 
m_n_coded
;

1078 
n_decoded_bôs
 = 
n_blocks
 * 
m_n_uncoded
;

1080 
cou¡
 = 0;

1082 
uöt32_T
 
i
 = 0; i < 
n_blocks
; i++)

1085 
uöt32_T
 
j
 = 0; j < 
m_n_uncoded
; j++)

1087 
ªcv_sy°1
[
j
] = 
ªcv_sig«ls
[
cou¡
++];

1088 
uöt32_T
 
k
 = 0; k < 
m_n_gís
 - 1; k++)

1090 
ªcv_∑rôy1
[
j
 * (
m_n_gís
 - 1Ë+ 
k
] = 
ªcv_sig«ls
[
cou¡
++];

1092 
uöt32_T
 
k
 = 0; k < 
m_n_gís
 - 1; k++)

1094 
ªcv_∑rôy2
[
j
 * (
m_n_gís
 - 1Ë+ 
k
] = 
ªcv_sig«ls
[
cou¡
++];

1098 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

1100 
ªcv_sy°1
[
m_n_uncoded
 + 
j
] = 
ªcv_sig«ls
[
cou¡
++];

1101 
uöt32_T
 
k
 = 0; k < 
m_n_gís
 - 1; k++)

1103 
ªcv_∑rôy1
[(
m_n_uncoded
 + 
j
Ë* (
m_n_gís
 - 1Ë+ 
k
] = 
ªcv_sig«ls
[
cou¡
++];

1106 
uöt32_T
 
j
 = 0; j < 
m_n_èû
; j++)

1108 
ªcv_sy°2
[
m_n_uncoded
 + 
j
] = 
ªcv_sig«ls
[
cou¡
++];

1109 
uöt32_T
 
k
 = 0; k < 
m_n_gís
 - 1; k++)

1111 
ªcv_∑rôy2
[(
m_n_uncoded
 + 
j
Ë* (
m_n_gís
 - 1Ë+ 
k
] = 
ªcv_sig«ls
[
cou¡
++];

1114 
	`decode_block
(
ªcv_sy°1
, 
ªcv_sy°2
, 
ªcv_∑rôy1
, 
ªcv_∑rôy2
, 
decoded_bôs
 + 
i
 * 
m_n_uncoded
);

1117 
dñëe
[] 
ªcv_sy°1
;

1118 
dñëe
[] 
ªcv_sy°2
;

1119 
dñëe
[] 
ªcv_∑rôy1
;

1120 
dñëe
[] 
ªcv_∑rôy2
;

1121 
	}
}

1123 
	gTurbo
::~
	$Turbo
()

1126 
dñëe
[] 
m_gí_pﬁs
;

1127 
dñëe
[] 
m_ªv_gí_pﬁs
;

1129 
dñëe
[] 
m_°©e_å™s
;

1130 
dñëe
[] 
m_ªv_°©e_å™s
;

1131 
dñëe
[] 
m_ouçut_∑rôy
;

1132 
dñëe
[] 
m_ªv_ouçut_∑rôy
;

1134 
dñëe
[] 
m_åñlis
;

1135 
	}
}

	@turbo.h

1 #i‚de‡
__TURBO_H_


2 
	#__TURBO_H_


	)

4 
	~"ty≥s.h
"

5 
	~<io°ªam
>

7 ˛as†
	cTurbo


9 
	mpublic
:

10 
Turbo
(
uöt32_T
 
gís
[], uöt32_T 
n_gís
, uöt32_T 
c⁄°øöt_Àngth
, uöt32_T 
öãæóvî_size
, uöt32_T 
n_ôîs
 = 1);

11 ~
Turbo
();

17 
£t_gíî©‹_pﬁynomüls
(
uöt32_T
 
gís
[], uöt32_T 
n_gís
, uöt32_T 
c⁄°øöt_Àngth
);

18 
ªvî£_öt
(
uöt32_T
 
Àngth
, 
ö
);

19 
ˇlc_°©e_å™sôi⁄
(c⁄° 
uöt32_T
 
ö°©e
, c⁄° 
öput
, 
uöt8_T
 *
∑rôy
);

24 
	$•ec_ícodî
(c⁄° 
uöt8_T
 *
öput
, c⁄° 
uöt32_T
 
n_öput
,

25 
uöt8_T
 *
ouçut
, 
uöt32_T
 &
n_ouçut
) const;

26 
	$•ec_c⁄°ôuít_ícodî
(c⁄° 
uöt8_T
 *
ö_bôs
, uöt8_T *
out_bôs
, uöt8_T *
fb_bôs
) const;

28 
	$ícodî
(c⁄° 
uöt8_T
 *
öput
, c⁄° 
uöt32_T
 
n_öput
,

29 
uöt8_T
 *
ouçut
, 
uöt32_T
 &
n_ouçut
) const;

30 
	$c⁄°ôuít_ícodî
(c⁄° 
uöt8_T
 *
öput
, uöt8_T *
èû
, uöt8_T *
∑rôy
) const;

32 
ãm∂©e
 <
ty≥«me
 
T
> 
	$öã∫Æ_öãæóvî
(c⁄° 
T
 *
ö
, T *
out
) const;

33 
ãm∂©e
 <
ty≥«me
 
T
> 
	$öã∫Æ_deöãæóvî
(c⁄° 
T
 *
ö
, T *
out
) const;

35 
	`gí_åñlis
();

39 
	`•ec_decodî
(c⁄° 
Êﬂt_poöt
 *
y
, c⁄° 
uöt32_T
 
n_y
, 
öt8_T
 *
d
, uöt32_T &
n_d
);

40 
	$•ec_m≠_decodî
(c⁄° 
Êﬂt_poöt
 *
y_s
, c⁄° flﬂt_poöà*
y_p
, c⁄° flﬂt_poöà*
L_≠ri‹i
,

41 
Êﬂt_poöt
 *
L_exåösic
, flﬂt_poöà*
LLR
, c⁄° 
uöt32_T
 
n
) const;

43 
	`decodî
(c⁄° 
Êﬂt_poöt
 *
ªcv_sig«ls
, c⁄° 
uöt32_T
 
n_ªcv_sig«ls
, 
öt8_T
 *
decoded_bôs
, uöt32_T &
n_decoded_bôs
);

44 
	`decode_block
(
Êﬂt_poöt
 *
ªcv_sy°1
, flﬂt_poöà*
ªcv_sy°2
, flﬂt_poöà*
ªcv_∑rôy1
,

45 
Êﬂt_poöt
 *
ªcv_∑rôy2
, 
öt8_T
 *
decoded_bôs_i
);

47 
	`m≠_decodî
(
Êﬂt_poöt
 *
ªcv_sy°
, flﬂt_poöà*
ªcv_∑rôy
, flﬂt_poöà*
≠ri‹i
, flﬂt_poöà*
exåösic
);

50 
¥iv©e
:

51 
uöt32_T
 
m_c°_Àn
;

52 
uöt32_T
 
m_n_°©es
;

57 
uöt32_T
 
m_n_uncoded
, 
m_n_coded
;

58 
uöt32_T
 
m_n_èû
;

59 
uöt32_T
 
m_n_gís
;

60 
uöt32_T
 
m_öãæóvî_size
;

65 
uöt32_T
 *
m_gí_pﬁs
;

66 
uöt32_T
 *
m_ªv_gí_pﬁs
;

69 
uöt8_T
 *
m_ouçut_∑rôy
;

70 
uöt8_T
 *
m_ªv_ouçut_∑rôy
;

72 
uöt8_T
 *
m_°©e_å™s
;

73 
uöt8_T
 *
m_ªv_°©e_å™s
;

75 
uöt32_T
 
m_n_ôîs
;

76 
öt8_T
 *
m_åñlis
;

78 
Êﬂt_poöt
 
Lc
;

81 
	#TURBO_INT_K_TABLE_SIZE
 188

	)

83 
uöt32_T
 
TURBO_INT_K_TABLE
[];

84 
uöt32_T
 
TURBO_INT_F1_TABLE
[];

85 
uöt32_T
 
TURBO_INT_F2_TABLE
[];

	@types.h

1 #i‚de‡
__TYPES_H_


2 
	#__TYPES_H_


	)

4 
	tuöt8_T
;

5 
	töt8_T
;

6 
	tuöt32_T
;

7 
	tÊﬂt_poöt
;

	@
1
.
1
/usr/include
7
77
defines.h
pccc.cpp
pccc_wrapper.cpp
pccc_wrapper.h
turbo.cpp
turbo.h
types.h
